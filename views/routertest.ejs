<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />  <meta name="description" />
    <title>Marionette.appRouter test</title>
    <link href="/javascripts/vendor/bootstrap/less/bootstrap.css" rel="stylesheet">
    <link rel='stylesheet' href='/stylesheets/main.css' />
    <script type="text/javascript" src="/javascripts/vendor/requirejs/require.js"></script>
    <script type="text/javascript" src="/javascripts/require-config.js"></script>
    <script type="text/javascript">
        require(["domReady", "jquery", "backbone", "marionette", "underscore", "bootstrap"], function(domReady, $, Backbone, Marionette, _){
            var Router = Marionette.AppRouter.extend({
                appRoutes: {
                    "": "goHome",
                    "home": "goHome",
                    "profile": "goProfile",
                    "messages": "goMessages",
                    "settings": "goSettings",
                    '*notFound': 'goHome'
                }
            });
            var API = {
                goHome: function(){
                    $('a[data-toggle="tab"][aria-controls="home"]').tab('show');
                },
                goProfile: function(){
                    $('a[data-toggle="tab"][aria-controls="profile"]').tab('show');
                },
                goMessages: function(){
                    $('a[data-toggle="tab"][aria-controls="messages"]').tab('show');
                },
                goSettings: function(){
                    $('a[data-toggle="tab"][aria-controls="settings"]').tab('show');
                }
            };
            $("ul.nav a").click(function (e) {
                e.preventDefault();
                $(this).tab('show');
            });
            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                Backbone.history.navigate($(e.target).attr("aria-controls"));
            });
            var router = new Router({
                controller: API
            });
            if(Backbone.history){
                Backbone.history.start();
            }
        });
    </script>
</head>
<body>

<div>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Home</a></li>
        <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Profile</a></li>
        <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li>
        <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane fade in active" id="home">---home---</div>
        <div role="tabpanel" class="tab-pane fade" id="profile">---profile---</div>
        <div role="tabpanel" class="tab-pane fade" id="messages">---messages---</div>
        <div role="tabpanel" class="tab-pane fade" id="settings">---settings---</div>
    </div>

</div>
</body>
</html>